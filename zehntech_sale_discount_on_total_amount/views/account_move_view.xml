<odoo>
        <record id="view_move_form_inherit_discount" model="ir.ui.view">
            <field name="name">account.move.view.form.inherit.discount</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="priority" eval="50"/>
            <field name="arch" type="xml">

            <xpath expr="//field[@name='narration']" position="before">
                <group string="Invoice Discount" groups="product.group_discount_per_so_line">
                    <field name="discount_type"/>
                    <field name="discount_rate"/>
                    <field name="discount_amount" readonly="1"/>
                </group>
            </xpath>

             <xpath expr="//field[@name='tax_totals']" position="after">
                <field name="discount_amount" readonly="1" widget="monetary"
                       options="{'currency_field': 'currency_id'}" string="Discount"/>
                <field name="amount_total" readonly="1" widget="monetary"
                       options="{'currency_field': 'currency_id'}"
                       string="Total Amount"
                       class="text-danger fw-bold fs-4"/>
            </xpath>

            <xpath expr="//header" position="inside">
                <button name="action_approve_discount"
                        string="Approve Discount"
                        type="object"
                        class="btn-primary"
                        invisible="state != 'waiting_approval'"
                       groups="zehntech_sale_discount_on_total_amount.group_discount_approval_manager"/>
                
                <button name="action_reject_discount"
                        string="Reject Discount"
                        type="object"
                        class="btn-secondary"
                        confirm="Are you sure you want to reject the discount?"
                        invisible="state != 'waiting_approval'"
                        groups="zehntech_sale_discount_on_total_amount.group_discount_approval_manager"/>
            </xpath>
        </field>
    </record>


          <record id="view_invoice_filter_inherit_discount_waiting" model="ir.ui.view">
            <field name="name">account.move.filter.inherit.invoice.discount.waiting</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='cancel']" position="after">
                    <filter string="Waiting for Discount Approval"
                            name="waiting_discount_approval"
                            domain="[('state', '=', 'waiting_approval'), ('move_type', '=', 'out_invoice')]"/>
                </xpath>
            </field>
        </record> 

    <record id="action_bulk_discount_approval_wizard_account" model="ir.actions.server">
        <field name="name">Bulk Discount Approval</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">action = env['account.move'].browse(env.context.get('active_ids')).action_open_bulk_discount_approval_wizard()</field>
        <field name="groups_id" eval="[(4, ref('zehntech_sale_discount_on_total_amount.group_discount_approval_manager'))]"/>
    </record>

    <record id="action_bulk_discount_update_wizard_invoice" model="ir.actions.server">
        <field name="name">Apply Bulk Discount</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">action = env['account.move'].browse(env.context.get('active_ids')).action_open_bulk_discount_update_wizard()</field>
        <field name="groups_id" eval="[(4, ref('zehntech_sale_discount_on_total_amount.group_discount_approval_manager'))]"/>
    </record>

</odoo>
